@page "/"
@using Frontend.Components.Shared
@using Frontend.Models

<div class="h-full grid grid-cols-1 xl:grid-cols-[1fr_320px] gap-6 overflow-hidden">

    @* The <main> column is now the scrollable container for posts *@
    <main class="py-6 overflow-y-auto custom-scrollbar">
        <div class="space-y-4">
            @foreach (var post in Posts)
            {
                <PostCard Post="post" />
            }
        </div>
    </main>

    @* Right sidebar content with the new "Create Post" section *@
    <aside class="hidden xl:block py-6">
        <div class="bg-white border border-gray-200 rounded-lg p-4">
            <h3 class="text-sm font-bold text-gray-900 mb-4 pb-2 border-b">
                Trending on DeskIt
            </h3>
            <ul class="space-y-4">
                <li class="flex items-center space-x-3">
                    <img class="h-8 w-8 rounded-full"
                         src="https://placehold.co/32x32/EA580C/FFFFFF?text=G"
                         alt="r/gaming icon" />
                    <div class="flex-1">
                        <a href="topic.html"
                           class="font-semibold text-sm hover:underline">What's a game that you think is a 10/10 masterpiece?</a>
                        <p class="text-xs text-gray-500">22.7k upvotes · r/gaming</p>
                    </div>
                </li>
                <li class="flex items-center space-x-3">
                    <img class="h-8 w-8 rounded-full"
                         src="https://placehold.co/32x32/1D4ED8/FFFFFF?text=T"
                         alt="r/technology icon" />
                    <div class="flex-1">
                        <a href="topic.html"
                           class="font-semibold text-sm hover:underline">This AI can generate video from a single text prompt</a>
                        <p class="text-xs text-gray-500">
                            15.1k upvotes · r/technology
                        </p>
                    </div>
                </li>
            </ul>
            <a href="popular.html"
               class="mt-4 block w-full bg-gray-100 text-center text-blue-600 font-bold py-2 rounded-full hover:bg-gray-200 transition">See More</a>
        </div>
    </aside>

</div>

@code{
    private List<Post> Posts = new();

    protected override void OnInitialized()
    {
        Posts = new List<Post>
        {
            new Post
            {
                CommunityName = "webdev",
                AuthorName = "coder123",
                Title = "What are your favorite 'Aha!' moments in learning a new framework?",
                Content = "Mine was finally understanding the component lifecycle in React. It felt like unlocking a superpower. Before that, I was just throwing useState and useEffect at the wall to see what stuck. What are some of yours? It's amazing how one concept can change your entire perspective on development.",
                CreatedAt = DateTime.Now.AddHours(-5),
                UpVotes = 1200,
                CommentsCount = 137
            },
            new Post
            {
                CommunityName = "design",
                AuthorName = "pixel_pusher",
                Title = "A beautiful UI kit I designed for free.",
                Content = "Just wanted to share this new UI kit I've been working on. Hope you all find it useful for your projects!",
                CreatedAt = DateTime.Now.AddHours(-9),
                UpVotes = 4800,
                CommentsCount = 302,
                ImageUrl = "UI+Kit+Preview"
            },
            new Post
            {
                CommunityName = "gaming",
                AuthorName = "level_up_guru",
                Title = "Just reached the final boss in the new Elden Ring DLC!",
                Content = "After 80 hours of intense gameplay, I've finally made it to the last boss. This DLC is absolutely massive and incredibly challenging. The world design is stunning and the new enemy types are terrifying. Wish me luck, I'm going in!",
                CreatedAt = DateTime.Now.AddMinutes(-25),
                UpVotes = 875,
                CommentsCount = 212
            }
        };
    }
}
